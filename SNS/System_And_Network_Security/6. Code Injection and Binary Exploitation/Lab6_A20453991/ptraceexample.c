/* C standard library */
#include <errno.h>
#include <stdio.h>
#include <stddef.h>
#include <stdlib.h>
#include <string.h>

/* POSIX */
#include <unistd.h>
#include <sys/user.h>
#include <sys/reg.h>
#include <sys/wait.h>

/* Linux */
#include <syscall.h>
#include <sys/ptrace.h>

int main(int argc, char** argv){
    int pid = atoi(argv[1]);
    //use ptrace to get the registers
    ptrace(PTRACE_ATTACH, pid, NULL, NULL);
    wait(NULL);
    struct user_regs_struct regs;
    //Get registers now
    ptrace(PTRACE_GETREGS,pid, NULL,&regs);

    printf("orig_rax: %llu \n rax: %llu \n rbx: %llu \n rcx: %llu\nrdx: %llu\n",regs.orig_rax,regs.rax,regs.rbx,regs.rcx,regs.rdx);
    long ins = ptrace(PTRACE_PEEKTEXT, pid,
                 regs.rip, NULL);

}
